def apply_risk_rules(signal, details, config):
    # Example: tighten SL if ATR is high, reduce leverage after drawdown
    # Implement adaptive rules here
    return signal, details